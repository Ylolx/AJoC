tellraw @s [{"text":"[","color":"aqua"},{"text":"ClearLag","color":"green"},{"text":"] "},{"text":"Settings: ","color":"gold"},{"text":"(refresh)","color":"gray","clickEvent":{"action":"run_command","value":"/function clearlag:other/menu"}}]
execute if score #CL_EO ClearLag matches 0 run tellraw @s [{"text":"[ ❌ ] ","color":"red","clickEvent":{"action":"run_command","value":"/scoreboard players set #CL_EO ClearLag 1"}},{"text":"Experience orbs","color":"red","hoverEvent":{"action":"show_text","value":"Experience orbs will be removed\nNote: Regardless of this setting they'll automatically merge together"}}]
execute if score #CL_EO ClearLag matches 1 run tellraw @s [{"text":"[ ✔ ] ","color":"green","clickEvent":{"action":"run_command","value":"/scoreboard players set #CL_EO ClearLag 0"}},{"text":"Experience orbs","color":"green","hoverEvent":{"action":"show_text","value":"Experience orbs will be removed\nNote: Regardless of this setting they'll automatically merge together"}}]
execute if score #CL_PD ClearLag matches 0 run tellraw @s [{"text":"[ ❌ ] ","color":"red","clickEvent":{"action":"run_command","value":"/scoreboard players set #CL_PD ClearLag 1"}},{"text":"Playerdistance","color":"red","hoverEvent":{"action":"show_text","value":"Items which are 20 blocks or less away from players wont be removed"}}]
execute if score #CL_PD ClearLag matches 1 run tellraw @s [{"text":"[ ✔ ] ","color":"green","clickEvent":{"action":"run_command","value":"/scoreboard players set #CL_PD ClearLag 0"}},{"text":"Playerdistance","color":"green","hoverEvent":{"action":"show_text","value":"Items which are 20 blocks or less away from players wont be removed"}}]
execute if score #CL_IIW ClearLag matches 0 run tellraw @s [{"text":"[ ❌ ] ","color":"red","clickEvent":{"action":"run_command","value":"/scoreboard players set #CL_IIW ClearLag 1"}},{"text":"Ignore items in water","color":"red","hoverEvent":{"action":"show_text","value":"Items in water wont be removed"}}]
execute if score #CL_IIW ClearLag matches 1 run tellraw @s [{"text":"[ ✔ ] ","color":"green","clickEvent":{"action":"run_command","value":"/scoreboard players set #CL_IIW ClearLag 0"}},{"text":"Ignore items in water","color":"green","hoverEvent":{"action":"show_text","value":"Items in water wont be removed"}}]
execute if score #CL_AF ClearLag matches 0 run tellraw @s [{"text":"[ ❌ ] ","color":"red","clickEvent":{"action":"run_command","value":"/scoreboard players set #CL_AF ClearLag 1"}},{"text":"Armorstand Lag/Crash fix","color":"red","hoverEvent":{"action":"show_text","value":"Armorstands wont have gravity anymore so they cant used to lag/crash the server"}}]
execute if score #CL_AF ClearLag matches 1 run tellraw @s [{"text":"[ ✔ ] ","color":"green","clickEvent":{"action":"run_command","value":"/scoreboard players set #CL_AF ClearLag 0"}},{"text":"Armorstand Lag/Crash fix","color":"green","hoverEvent":{"action":"show_text","value":"Armorstands wont have gravity anymore so they cant used to lag/crash the server"}}]
execute if score #CL_FE ClearLag matches 0 run tellraw @s [{"text":"[ ❌ ] ","color":"red","clickEvent":{"action":"run_command","value":"/scoreboard players set #CL_FE ClearLag 1"}},{"text":"Remove/Freeze unused entities","color":"red","hoverEvent":{"action":"show_text","value":"Freeze bats and remove fireballs, snowballs and eggs if they're too far away from any player"}}]
execute if score #CL_FE ClearLag matches 1 run tellraw @s [{"text":"[ ✔ ] ","color":"green","clickEvent":{"action":"run_command","value":"/scoreboard players set #CL_FE ClearLag 0"}},{"text":"Remove/Freeze unused entities","color":"green","hoverEvent":{"action":"show_text","value":"Freeze bats and remove fireballs, snowballs and eggs if they're too far away from any player"}}]
execute if score #CL_DE ClearLag matches 0 if score #CL_Respawn ClearLag matches 0 run tellraw @s [{"text":"[ ❌ ] ","color":"red","clickEvent":{"action":"run_command","value":"/scoreboard players set #CL_DE ClearLag 1"}},{"text":"Prevent clearing items near death coordinates","color":"red","hoverEvent":{"action":"show_text","value":"Prevents removing items near death coordinates"}}]
execute if score #CL_DE ClearLag matches 0 if score #CL_Respawn ClearLag matches 1 run tellraw @s [{"text":"[ ❌ ] ","color":"dark_red","hoverEvent":{"action":"show_text","value":[{"text":"Prevents removing items near death coordinates after a player died near them"},{"text":"\nGamerule doImmediateRespawn has to be disabled!","color":"red"}]}},{"text":"Prevent clearing items near death coordinates","color":"red"}]
execute if score #CL_DE ClearLag matches 1 run tellraw @s [{"text":"[ ✔ ] ","color":"green","clickEvent":{"action":"run_command","value":"/scoreboard players set #CL_DE ClearLag 0"}},{"text":"Prevent clearing items near death coordinates","color":"green","hoverEvent":{"action":"show_text","value":"Prevents removing items near death coordinates"}}]
execute if score #CL_DE ClearLag matches 1 if score #CL_Respawn ClearLag matches 1 run tellraw @s [{"text":"[ ☹ ] ","color":"dark_red"},{"text":"Above setting wont work as the gamerule doImmediateRespawn is enabled","color":"yellow"}]
tellraw @s {"text":"[ ☀ ] Skip next clear","color":"gray","clickEvent":{"action":"run_command","value":"/function clearlag:skip"}}
tellraw @s {"text":"[ ☠ ] Remove datapack","color":"dark_red","clickEvent":{"action":"run_command","value":"/function clearlag:uninstall/confirm"}}

##Gamerule rollback##
gamerule sendCommandFeedback false
schedule function clearlag:other/system/gamerule 1t
